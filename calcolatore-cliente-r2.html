<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dimensionamento Impianto Vapore - Ingauna Vapore</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background: #1a1a1a;
            color: #ffffff;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .header {
            background: #0d0d0d;
            padding: 50px 40px;
            border-bottom: 3px solid #FF5722;
        }
        
        .header h1 {
            font-size: 2.8em;
            font-weight: 800;
            margin-bottom: 15px;
            color: #ffffff;
            letter-spacing: -1px;
        }
        
        .header p {
            font-size: 1.2em;
            color: #b0b0b0;
            font-weight: 300;
        }
        
        .info-banner {
            background: #FF5722;
            color: #ffffff;
            padding: 20px 40px;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            letter-spacing: 1px;
        }
        
        .inputs-section {
            display: block;
            background: #2d2d2d;
        }
        
        .input-panel {
            padding: 50px 40px;
            background: #1a1a1a;
            position: relative;
        }
        
        .input-panel h2 {
            color: #FF5722;
            font-size: 1.6em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .input-panel label {
            display: block;
            font-weight: 400;
            color: #b0b0b0;
            margin-bottom: 20px;
            font-size: 1em;
            text-align: center;
            letter-spacing: 1px;
        }
        
        .input-panel input[type="range"] {
            width: 100%;
            margin: 25px 0;
            cursor: pointer;
            height: 8px;
            appearance: none;
            background: #3d3d3d;
            border-radius: 4px;
            outline: none;
        }
        
        .input-panel input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 28px;
            height: 28px;
            background: #FF5722;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .input-panel input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        .input-panel input[type="range"]::-moz-range-thumb {
            width: 28px;
            height: 28px;
            background: #FF5722;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }
        
        .size-button {
            background: #1a1a1a;
            border: 3px solid #3d3d3d;
            color: #ffffff;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Montserrat', sans-serif;
            text-align: center;
        }
        
        .size-button:hover {
            border-color: #FF5722;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 87, 34, 0.3);
        }
        
        .size-button.active {
            background: #FF5722;
            border-color: #FF5722;
            transform: scale(1.05);
        }
        
        .size-button.active:hover {
            transform: scale(1.05);
        }
        
        input[type="text"]:focus,
        input[type="tel"]:focus,
        input[type="email"]:focus {
            outline: none;
            border-color: #FF5722 !important;
        }
        
        .value-display {
            text-align: center;
            font-size: 3em;
            font-weight: 800;
            color: #FF5722;
            margin: 30px 0;
        }
        
        /* Sezione Costi Operativi */
        .operating-costs-section {
            background: #0d0d0d;
            padding: 50px 40px;
            border-top: 3px solid #FF5722;
        }
        
        .operating-costs-section h2 {
            color: #FF5722;
            font-size: 1.8em;
            margin-bottom: 35px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .operating-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 60px;
            margin-bottom: 50px;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .operating-input-group {
            background: #1a1a1a;
            padding: 40px;
            border-radius: 12px;
            border: 2px solid #3d3d3d;
        }
        
        .operating-input-group label {
            display: block;
            font-weight: 600;
            color: #b0b0b0;
            margin-bottom: 20px;
            font-size: 1.1em;
            text-align: center;
            letter-spacing: 1px;
        }
        
        .operating-input-group .slider-value {
            text-align: center;
            font-size: 2.5em;
            font-weight: 800;
            color: #FF5722;
            margin: 20px 0 30px 0;
        }
        
        .operating-input-group input[type="range"] {
            width: 100%;
            cursor: pointer;
            height: 8px;
            appearance: none;
            background: #3d3d3d;
            border-radius: 4px;
            outline: none;
        }
        
        .operating-input-group input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 28px;
            height: 28px;
            background: #FF5722;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .operating-input-group input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.2);
        }
        
        .operating-input-group input[type="range"]::-moz-range-thumb {
            width: 28px;
            height: 28px;
            background: #FF5722;
            cursor: pointer;
            border-radius: 50%;
            border: none;
        }
        
        .slider-range {
            display: flex;
            justify-content: space-between;
            color: #666;
            font-size: 0.9em;
            margin-top: 10px;
        }
        
        .operating-result {
            background: #FF5722;
            padding: 30px;
            border-radius: 16px;
            text-align: center;
            max-width: 700px;
            margin: 0 auto;
            box-shadow: 0 10px 40px rgba(255, 87, 34, 0.4);
        }
        
        .operating-result h3 {
            color: #ffffff;
            font-size: 1.2em;
            margin-bottom: 15px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .operating-result .cost-value {
            font-size: 3.5em;
            font-weight: 800;
            color: #ffffff;
            margin: 5px 0;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        .operating-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            max-width: 1200px;
            margin: 40px auto 0;
        }
        
        .operating-detail-card {
            background: #1a1a1a;
            padding: 25px;
            border-radius: 12px;
            border: 2px solid #3d3d3d;
        }
        
        .operating-detail-card .detail-label {
            color: #b0b0b0;
            font-size: 0.95em;
            margin-bottom: 10px;
            font-weight: 500;
        }
        
        .operating-detail-card .detail-value {
            color: #FF5722;
            font-size: 1.8em;
            font-weight: 700;
        }
        
        .options-section {
            background: #2d2d2d;
            padding: 40px 50px;
            border-top: 2px solid #3d3d3d;
        }
        
        .options-section h3 {
            color: #FF5722;
            font-size: 1.4em;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }
        
        .option-item {
            background: #1a1a1a;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #3d3d3d;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .option-item:hover {
            border-color: #FF5722;
        }
        
        .option-item input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            accent-color: #FF5722;
        }
        
        .option-item label {
            flex: 1;
            cursor: pointer;
            font-weight: 500;
            color: #ffffff;
        }
        
        .dosers-section {
            background: #1a1a1a;
            padding: 25px;
            border-radius: 8px;
            margin-top: 20px;
            border: 2px solid #3d3d3d;
            display: none;
        }
        
        .dosers-section h4 {
            color: #FF5722;
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .dosers-section .option-item {
            background: #2d2d2d;
            margin-bottom: 10px;
        }
        
        .dosers-section .option-item:last-child {
            margin-bottom: 0;
        }
        
        .advanced-params {
            background: #1a1a1a;
            padding: 40px 50px;
            border-top: 2px solid #3d3d3d;
        }
        
        .advanced-params h3 {
            color: #FF5722;
            font-size: 1.4em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .param-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .param-item {
            background: #2d2d2d;
            padding: 25px;
            border-radius: 8px;
            border: 2px solid #3d3d3d;
        }
        
        .param-item label {
            display: block;
            color: #b0b0b0;
            margin-bottom: 15px;
            font-weight: 500;
            font-size: 1em;
        }
        
        .param-item .param-value {
            text-align: center;
            font-size: 2em;
            font-weight: 700;
            color: #FF5722;
            margin: 15px 0;
        }
        
        .param-item input[type="range"] {
            width: 100%;
            margin-top: 10px;
        }
        
        .results-section {
            background: #0d0d0d;
            padding: 60px 50px;
            border-top: 3px solid #FF5722;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .results-header h2 {
            color: #FF5722;
            font-size: 2.2em;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .cycle-info {
            text-align: center;
            color: #b0b0b0;
            font-size: 1.1em;
            margin-bottom: 40px;
            padding: 20px;
            background: #1a1a1a;
            border-radius: 8px;
        }
        
        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 50px;
        }
        
        .result-card {
            background: #1a1a1a;
            padding: 30px 20px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #3d3d3d;
            transition: all 0.3s;
        }
        
        .result-card:hover {
            transform: translateY(-5px);
            border-color: #FF5722;
            box-shadow: 0 10px 30px rgba(255, 87, 34, 0.2);
        }
        
        .result-card .label {
            color: #b0b0b0;
            font-size: 0.95em;
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .result-card .value {
            color: #ffffff;
            font-size: 2.5em;
            font-weight: 800;
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: 5px;
        }
        
        .result-card .unit {
            font-size: 0.5em;
            color: #FF5722;
            font-weight: 600;
        }
        
        .investment-section {
            background: #1a1a1a;
            padding: 50px 40px;
            border-top: 2px solid #3d3d3d;
        }
        
        .investment-section h2 {
            color: #FF5722;
            font-size: 1.8em;
            margin-bottom: 35px;
            text-align: center;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .investment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 50px;
        }
        
        .investment-card {
            background: #2d2d2d;
            padding: 30px;
            border-radius: 12px;
            border: 2px solid #3d3d3d;
        }
        
        .investment-card .category {
            color: #b0b0b0;
            font-size: 1em;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .investment-card .amount {
            color: #ffffff;
            font-size: 2em;
            font-weight: 800;
        }
        
        .investment-total {
            background: linear-gradient(135deg, #FF5722 0%, #ff7043 100%);
            padding: 35px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(255, 87, 34, 0.4);
        }
        
        .investment-total h3 {
            color: #ffffff;
            font-size: 1.3em;
            margin-bottom: 15px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .investment-total .total-amount {
            color: #ffffff;
            font-size: 3.8em;
            font-weight: 900;
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .contact-section {
            background: #0d0d0d;
            padding: 60px 50px;
            border-top: 3px solid #FF5722;
        }
        
        .contact-section h2 {
            color: #FF5722;
            font-size: 2.2em;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .contact-form {
            max-width: 700px;
            margin: 0 auto;
            background: #1a1a1a;
            padding: 50px;
            border-radius: 16px;
            border: 2px solid #3d3d3d;
        }
        
        .form-group {
            margin-bottom: 30px;
        }
        
        .form-group label {
            display: block;
            color: #b0b0b0;
            margin-bottom: 12px;
            font-weight: 600;
            font-size: 1.05em;
        }
        
        .form-group input {
            width: 100%;
            padding: 18px;
            border: 2px solid #3d3d3d;
            background: #2d2d2d;
            color: #ffffff;
            border-radius: 8px;
            font-size: 1.05em;
            font-family: 'Montserrat', sans-serif;
            transition: all 0.3s;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #FF5722;
            background: #1a1a1a;
        }
        
        .submit-btn {
            width: 100%;
            padding: 22px;
            background: #FF5722;
            color: #ffffff;
            border: none;
            border-radius: 12px;
            font-size: 1.3em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .submit-btn:hover {
            background: #ff7043;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 87, 34, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .footer {
            background: #0d0d0d;
            padding: 40px;
            text-align: center;
            color: #666;
            border-top: 2px solid #3d3d3d;
        }
        
        .footer p {
            margin-bottom: 15px;
            font-size: 1.05em;
        }
        
        .footer a {
            color: #FF5722;
            text-decoration: none;
            font-weight: 600;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        /* Popup Modale Personalizzato */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(8px);
            z-index: 9999;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-overlay.show {
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
            border: 3px solid #FF5722;
            border-radius: 20px;
            padding: 50px 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(255, 87, 34, 0.5);
            animation: slideUp 0.4s ease;
            position: relative;
        }
        
        .modal-icon {
            font-size: 4em;
            margin-bottom: 20px;
            animation: scaleIn 0.5s ease;
        }
        
        .modal-title {
            color: #FF5722;
            font-size: 1.8em;
            font-weight: 800;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        .modal-message {
            color: #b0b0b0;
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .modal-button {
            background: #FF5722;
            color: #ffffff;
            border: none;
            padding: 18px 50px;
            border-radius: 12px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
            font-family: 'Montserrat', sans-serif;
        }
        
        .modal-button:hover {
            background: #ff7043;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(255, 87, 34, 0.4);
        }
        
        .modal-button:active {
            transform: translateY(0);
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes scaleIn {
            0% {
                transform: scale(0);
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
            }
        }
        
        @media (max-width: 968px) {
            .operating-inputs {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .value-display {
                font-size: 2.5em;
            }
            
            .operating-result .cost-value {
                font-size: 3em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üå± Dimensionamento Impianto Vapore</h1>
            <p>Calcola la configurazione ottimale per la sterilizzazione del terriccio</p>
        </div>
        
        <div class="info-banner">
            CONFIGURATORE PROFESSIONALE - INGAUNA VAPORE S.R.L.
        </div>
        
        <div class="inputs-section">
            <div class="input-panel">
                <h2>üìä Produzione</h2>
                <label>Seleziona la produzione oraria dell'impianto</label>
                
                <input type="hidden" id="production" value="6">
                <input type="hidden" id="generator" value="400">
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 40px;">
                    <button class="size-button" id="size1" onclick="selectSize(1)">
                        <div style="font-size: 2.5em; font-weight: 800; margin-bottom: 10px;">1</div>
                        <div style="font-size: 1em; color: #b0b0b0;">m¬≥/h</div>
                        <div style="font-size: 0.85em; color: #666; margin-top: 8px;">Gen. 100 kg/h</div>
                    </button>
                    <button class="size-button" id="size3" onclick="selectSize(3)">
                        <div style="font-size: 2.5em; font-weight: 800; margin-bottom: 10px;">3</div>
                        <div style="font-size: 1em; color: #b0b0b0;">m¬≥/h</div>
                        <div style="font-size: 0.85em; color: #666; margin-top: 8px;">Gen. 200 kg/h</div>
                    </button>
                    <button class="size-button active" id="size6" onclick="selectSize(6)">
                        <div style="font-size: 2.5em; font-weight: 800; margin-bottom: 10px;">6</div>
                        <div style="font-size: 1em; color: #b0b0b0;">m¬≥/h</div>
                        <div style="font-size: 0.85em; color: #666; margin-top: 8px;">Gen. 400 kg/h</div>
                    </button>
                    <button class="size-button" id="size10" onclick="selectSize(10)">
                        <div style="font-size: 2.5em; font-weight: 800; margin-bottom: 10px;">10</div>
                        <div style="font-size: 1em; color: #b0b0b0;">m¬≥/h</div>
                        <div style="font-size: 0.85em; color: #666; margin-top: 8px;">Gen. 600 kg/h</div>
                    </button>
                </div>
            </div>
        </div>
        
        <div class="operating-costs-section" id="operatingCostsSection">
            <h2>üí∞ Analisi Costi Operativi</h2>
            
            <div class="operating-inputs">
                <div class="operating-input-group">
                    <label>Volume Terriccio Annuale</label>
                    <div class="slider-value">
                        <span id="annualVolumeValue">6000</span> <span style="font-size: 0.6em;">m¬≥/anno</span>
                    </div>
                    <input type="range" id="annualVolumeSlider" min="500" max="2000" value="6000" step="100">
                    <div class="slider-range">
                        <span id="volumeMin">500</span>
                        <span id="volumeMax">2000</span>
                    </div>
                </div>
                
                <div class="operating-input-group">
                    <label>Costo Lavoro Conduttore</label>
                    <div class="slider-value">
                        <span id="laborCostValue">17.50</span> <span style="font-size: 0.6em;">‚Ç¨/ora</span>
                    </div>
                    <input type="range" id="laborCostSlider" min="10" max="25" value="17.50" step="0.50">
                    <div class="slider-range">
                        <span>10 ‚Ç¨/h</span>
                        <span>25 ‚Ç¨/h</span>
                    </div>
                </div>
            </div>
            
            <div class="operating-result">
                <h3>COSTO SPECIFICO</h3>
                <div class="cost-value">
                    <span id="specificCostValue">5.54</span> <span style="font-size: 0.6em;">‚Ç¨/m¬≥</span>
                </div>
            </div>
            
            <div class="operating-details">
                <div class="operating-detail-card">
                    <div class="detail-label">Ore Utilizzo Annuali</div>
                    <div class="detail-value"><span id="annualHoursValue">1000</span> h</div>
                </div>
                <div class="operating-detail-card">
                    <div class="detail-label">Costi Energetici</div>
                    <div class="detail-value"><span id="energyCostValue">15,000</span> ‚Ç¨</div>
                </div>
                <div class="operating-detail-card">
                    <div class="detail-label">Costi Manodopera</div>
                    <div class="detail-value"><span id="laborCostTotalValue">17,500</span> ‚Ç¨</div>
                </div>
                <div class="operating-detail-card">
                    <div class="detail-label">Totale Annuale</div>
                    <div class="detail-value"><span id="totalAnnualCostValue">32,500</span> ‚Ç¨</div>
                </div>
            </div>
        </div>
        
        <div class="options-section">
            <h3>‚öôÔ∏è Componenti Opzionali</h3>
            <div class="options-grid">
                <div class="option-item" onclick="document.getElementById('optSminuzzatore').click();">
                    <input type="checkbox" id="optSminuzzatore" checked>
                    <label for="optSminuzzatore">
                        <strong>Sminuzzatore</strong><br>
                        <span style="font-size: 0.9em; color: #b0b0b0;">Riduzione dimensione zolle</span>
                    </label>
                </div>
                
                <div class="option-item" onclick="document.getElementById('optVaglio').click();">
                    <input type="checkbox" id="optVaglio" checked>
                    <label for="optVaglio">
                        <strong>Vaglio</strong><br>
                        <span style="font-size: 0.9em; color: #b0b0b0;">Setacciatura terriccio</span>
                    </label>
                </div>
                
                <div class="option-item" onclick="document.getElementById('optDosatori').click();">
                    <input type="checkbox" id="optDosatori">
                    <label for="optDosatori">
                        <strong>Dosatori Reintegro</strong><br>
                        <span style="font-size: 0.9em; color: #b0b0b0;">Aggiunte post-sterilizzazione</span>
                    </label>
                </div>
                
                <div class="option-item" onclick="document.getElementById('optInstallazione').click();">
                    <input type="checkbox" id="optInstallazione">
                    <label for="optInstallazione">
                        <strong>Installazione</strong><br>
                        <span style="font-size: 0.9em; color: #b0b0b0;">Montaggio e avviamento</span>
                    </label>
                </div>
            </div>
            
            <div class="dosers-section" id="dosersSection">
                <h4>Sostanze da Dosare (Seleziona):</h4>
                <div class="option-item" onclick="document.getElementById('subMicrorganismi').click();">
                    <input type="checkbox" id="subMicrorganismi">
                    <label for="subMicrorganismi">Microrganismi</label>
                </div>
                <div class="option-item" onclick="document.getElementById('subConcime').click();">
                    <input type="checkbox" id="subConcime">
                    <label for="subConcime">Concime granulare</label>
                </div>
                <div class="option-item" onclick="document.getElementById('subInorganici').click();">
                    <input type="checkbox" id="subInorganici">
                    <label for="subInorganici">Componenti inorganiche (argilla, perlite, zeolite)</label>
                </div>
                <div class="option-item" onclick="document.getElementById('subSubstrato').click();">
                    <input type="checkbox" id="subSubstrato">
                    <label for="subSubstrato">Reintegro substrato vergine</label>
                </div>
                <div class="option-item" onclick="document.getElementById('subAcqua').click();">
                    <input type="checkbox" id="subAcqua">
                    <label for="subAcqua">Umidificazione con acqua</label>
                </div>
            </div>
        </div>
        
        <div class="advanced-params">
            <h3>üîß Parametri Processo</h3>
            <p style="text-align: center; color: #b0b0b0; margin-bottom: 30px;">Parametri documentativi (non influenzano i calcoli)</p>
            <div class="param-grid">
                <div class="param-item">
                    <label>Temperatura Sterilizzazione</label>
                    <div class="param-value"><span id="targetTempValue">85</span> ¬∞C</div>
                    <input type="range" id="targetTemp" min="70" max="100" value="85" step="1">
                </div>
                <div class="param-item">
                    <label>Umidit√† Terriccio</label>
                    <div class="param-value"><span id="moistureValue">30</span> %</div>
                    <input type="range" id="moisture" min="15" max="45" value="30" step="1">
                </div>
                <div class="param-item">
                    <label>Densit√† Terriccio</label>
                    <div class="param-value"><span id="soilDensityValue">650</span> kg/m¬≥</div>
                    <input type="range" id="soilDensity" min="400" max="800" value="650" step="10">
                </div>
            </div>
        </div>
        
        <div class="results-section" id="resultsSection">
            <!-- Populated by JavaScript -->
        </div>
        
        <div class="investment-section">
            <h2>üíº Analisi Investimento</h2>
            <div class="investment-grid" id="investmentGrid">
                <!-- Populated by JavaScript -->
            </div>
            <div class="investment-total">
                <h3>INVESTIMENTO TOTALE</h3>
                <div class="total-amount" id="totalInvestmentValue">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="contact-section">
            <h2>üìß Richiedi Preventivo Dettagliato</h2>
            <form class="contact-form" onsubmit="return sendRequest();">
                <div class="form-group">
                    <label for="name">Nome e Cognome *</label>
                    <input type="text" id="name" required placeholder="Il tuo nome">
                </div>
                <div class="form-group">
                    <label for="phone">Telefono *</label>
                    <input type="tel" id="phone" required placeholder="+39 123 456 7890">
                </div>
                <div class="form-group">
                    <label for="email">Email *</label>
                    <input type="email" id="email" required placeholder="tua@email.it">
                </div>
                <button type="submit" class="submit-btn" id="submitBtn">üì© Invia Richiesta</button>
            </form>
        </div>
        
        <div class="footer">
            <p><strong>Ingauna Vapore S.r.l.</strong></p>
            <p>Via dell'Industria, 12 - 17100 Savona (SV) - Italia</p>
            <p>Tel: <a href="tel:+390198765432">+39 019 876 5432</a> | Email: <a href="mailto:info@inguanavapore.it">info@inguanavapore.it</a></p>
            <p style="margin-top: 25px; color: #666;">¬© 2025 Ingauna Vapore S.r.l. - P.IVA 01234567890</p>
        </div>
    </div>
    
    <!-- Popup Modale Personalizzato -->
    <div class="modal-overlay" id="successModal">
        <div class="modal-content">
            <div class="modal-icon">‚úÖ</div>
            <h3 class="modal-title">Richiesta Inviata!</h3>
            <p class="modal-message">
                Riceverai il dimensionamento completo via email e verrai ricontattato al pi√π presto da Ingauna Vapore.
                <br><br>
                <strong>Grazie per averci contattato!</strong>
            </p>
            <button class="modal-button" onclick="closeModal()">OK</button>
        </div>
    </div>

    <script>
        // Costanti fisiche e operative
        const CONSTANTS = {
            CYCLE_TIME: 20,
            BATCHES_PER_HOUR: 3,
            ambientTemp: 15,
            cpSoilDry: 800,
            cpWater: 4186,
            evaporationRate: 0.15,
            heatVaporization: 2260000,
            heatLoss: 0.15,
            vesselHeat: 500000,
            vaporEnthalpy: 2675900,
            waterEnthalpy: 419040,
            dieselPCI: 42700,
            generatorEfficiency: 0.90,
            dieselDensity: 0.835,
            dieselPrice: 1.45,
            electricityPrice: 0.28
        };

        // ============================================
        // CONFIGURAZIONE EMAILJS - CONFIGURATO
        // ============================================
        const EMAILJS_CONFIG = {
            publicKey: 'zqegaquP7HcONx2HK',
            serviceId: 'service_mecna',
            templateId: 'template-vapore'
        };
        
        // Inizializza EmailJS
        (function() {
            emailjs.init(EMAILJS_CONFIG.publicKey);
        })();
        // ============================================

        // Funzioni popup modale
        function showModal() {
            document.getElementById('successModal').classList.add('show');
        }
        
        function closeModal() {
            document.getElementById('successModal').classList.remove('show');
        }
        
        // Chiudi modale cliccando fuori dal contenuto
        document.addEventListener('click', function(event) {
            const modal = document.getElementById('successModal');
            if (event.target === modal) {
                closeModal();
            }
        });

        // Mapping slider position (0-3) -> produzione m¬≥/h
        const PRODUCTION_VALUES = [1, 3, 6, 10];
        
        // Mapping produzione -> generatore (correlazione rigida)
        const PRODUCTION_TO_GENERATOR = {
            1: 100,
            3: 200,
            6: 400,
            10: 600
        };
        
        // Mapping produzione -> volume vasca (m¬≥) - valori specifici per ogni taglia
        const BATCH_SIZES = {
            1: 0.33,
            3: 1.0,
            6: 2.0,
            10: 3.33
        };
        
        // Costi generatori aggiornati
        const GENERATOR_COSTS = {
            100: 20000,
            200: 28000,
            400: 40000,
            600: 55000
        };
        
        // Range slider volume annuale in base alla produzione
        const VOLUME_RANGES = {
            1: { min: 500, max: 2000 },
            3: { min: 1500, max: 6000 },
            6: { min: 3000, max: 12000 },
            10: { min: 6000, max: 20000 }
        };
        
        function getProductionFromSlider(sliderValue) {
            return PRODUCTION_VALUES[parseInt(sliderValue)];
        }
        
        function getGeneratorForProduction(production) {
            return PRODUCTION_TO_GENERATOR[production];
        }
        
        // Moltiplicatore costo per impianti pi√π grandi (+10% per taglie maggiori)
        function getCostMultiplier(production) {
            if (production >= 10) return 1.10; // +10% per 10 e 15 m¬≥/h
            return 1.0; // Nessun aumento per 1, 3, 5 m¬≥/h
        }

        let currentProduction = 6; // Default

        function selectSize(production) {
            currentProduction = production;
            const generator = getGeneratorForProduction(production);
            
            // Aggiorna hidden inputs
            document.getElementById('production').value = production;
            document.getElementById('generator').value = generator;
            
            // Aggiorna UI bottoni
            document.querySelectorAll('.size-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById('size' + production).classList.add('active');
            
            // Aggiorna range slider volume annuale
            updateVolumeSliderRange(production);
            
            // Aggiorna calcoli
            updateCalculations();
        }
        
        function updateVolumeSliderRange(production) {
            const range = VOLUME_RANGES[production];
            const slider = document.getElementById('annualVolumeSlider');
            
            slider.min = range.min;
            slider.max = range.max;
            
            // Imposta valore default al centro del range
            const defaultValue = Math.round((range.min + range.max) / 2);
            slider.value = defaultValue;
            
            // Aggiorna visualizzazione
            document.getElementById('annualVolumeValue').textContent = defaultValue.toLocaleString('it-IT');
            document.getElementById('volumeMin').textContent = range.min.toLocaleString('it-IT');
            document.getElementById('volumeMax').textContent = range.max.toLocaleString('it-IT');
        }

        function calculateSystem(production, generatorCapacity, options, params) {
            // Usa volume vasca specifico per ogni taglia
            const batchSize = BATCH_SIZES[production];
            const totalMass = batchSize * params.soilDensity;
            const dryMass = totalMass * (1 - params.moisture/100);
            const waterMass = totalMass * (params.moisture/100);
            const deltaT = params.targetTemp - CONSTANTS.ambientTemp;
            
            const Q1 = dryMass * CONSTANTS.cpSoilDry * deltaT;
            const Q2 = waterMass * CONSTANTS.cpWater * deltaT;
            const Q3 = waterMass * CONSTANTS.evaporationRate * CONSTANTS.heatVaporization;
            const Q4 = (Q1 + Q2 + Q3) * CONSTANTS.heatLoss;
            const Q5 = CONSTANTS.vesselHeat;
            const energyKWh = (Q1 + Q2 + Q3 + Q4 + Q5) / 3600;
            
            const usefulHeat = CONSTANTS.vaporEnthalpy - CONSTANTS.waterEnthalpy;
            const steamPerBatch = (energyKWh * 3600) / usefulHeat;
            const heatingTime = CONSTANTS.CYCLE_TIME * 0.6;
            const steamPeak = (steamPerBatch * 0.65) / (heatingTime / 60);
            const steamAvg = steamPerBatch / (CONSTANTS.CYCLE_TIME / 60);
            
            const requiredCapacity = steamPeak * 1.20;
            const utilization = (requiredCapacity / generatorCapacity) * 100;
            const feasible = requiredCapacity <= generatorCapacity;
            
            const dieselConsumption = (energyKWh * production / batchSize) / (CONSTANTS.dieselPCI * CONSTANTS.generatorEfficiency);
            const dieselLiters = dieselConsumption / CONSTANTS.dieselDensity;
            const electricityCost = 25.9 * CONSTANTS.electricityPrice;
            const hourlyCost = dieselLiters * CONSTANTS.dieselPrice + electricityCost;
            const annualCost = hourlyCost * 2000;
            
            // Costo generatore dai nuovi valori
            const generatorCost = GENERATOR_COSTS[generatorCapacity];
            
            // Moltiplicatore per impianti grandi (+10%)
            const costMultiplier = getCostMultiplier(production);
            
            // Moduli linea: -30% base, poi vasche/sminu/vaglio ulteriore -20% = 0.56 totale, poi moltiplicatore
            const vascaSminuzzatoreCost = (8000 + batchSize * 1500) * 0.56 * costMultiplier;
            const sminuzzatoreCost = options.sminuzzatore ? 12000 * 0.56 * costMultiplier : 0;
            const vaglioCost = options.vaglio ? 8000 * 0.56 * costMultiplier : 0;
            const vascaSterilizzazioneCost = (15000 + batchSize * 3500) * 0.56 * costMultiplier;
            const raffreddatoreCost = (6000 + batchSize * 800) * 0.56 * costMultiplier;
            const vascaMiscelazioneCost = (10000 + batchSize * 1200) * 0.56 * costMultiplier;
            const dosatoriCost = options.dosatori ? 5000 * 0.7 * costMultiplier : 0;
            
            const lineaCost = vascaSminuzzatoreCost + sminuzzatoreCost + vaglioCost + 
                             vascaSterilizzazioneCost + raffreddatoreCost + 
                             vascaMiscelazioneCost + dosatoriCost;
            
            // Coclee trasporto (proporzionali alla produzione) con moltiplicatore
            const cocleeCost = (6000 + production * 300) * costMultiplier;
            
            // Altri costi (proporzionali alla produzione) con moltiplicatore
            const waterTreatmentCost = (3000 + production * 350) * costMultiplier;
            const electricalCost = (12000 + production * 400) * 0.9 * costMultiplier; // -10% quadri elettrici
            const installationCost = options.installazione ? (15000 + production * 600) * 0.7 * costMultiplier : 0;
            
            const totalInvestment = generatorCost + lineaCost + cocleeCost + 
                                   waterTreatmentCost + electricalCost + installationCost;
            
            return {
                batchSize, heatingTime, steamPerBatch, peakFlow: steamPeak, avgFlow: steamAvg,
                requiredCapacity, utilization, feasible, dieselLiters, hourlyCost,
                dailyCost: hourlyCost * 8, annualCost, generatorCost,
                vascaSminuzzatoreCost, sminuzzatoreCost, vaglioCost, vascaSterilizzazioneCost,
                raffreddatoreCost, vascaMiscelazioneCost, dosatoriCost, lineaCost,
                cocleeCost, waterTreatmentCost, electricalCost, installationCost,
                totalInvestment
            };
        }

        function getOptions() {
            return {
                sminuzzatore: document.getElementById('optSminuzzatore').checked,
                vaglio: document.getElementById('optVaglio').checked,
                dosatori: document.getElementById('optDosatori').checked,
                installazione: document.getElementById('optInstallazione').checked
            };
        }
        
        function getDoserSubstances() {
            if (!document.getElementById('optDosatori').checked) {
                return [];
            }
            const substances = [];
            if (document.getElementById('subMicrorganismi').checked) substances.push('Microrganismi');
            if (document.getElementById('subConcime').checked) substances.push('Concime granulare');
            if (document.getElementById('subInorganici').checked) substances.push('Componenti inorganiche');
            if (document.getElementById('subSubstrato').checked) substances.push('Reintegro substrato vergine');
            if (document.getElementById('subAcqua').checked) substances.push('Umidificazione con acqua');
            return substances;
        }
        
        function toggleDoserSection() {
            const dosersChecked = document.getElementById('optDosatori').checked;
            const dosersSection = document.getElementById('dosersSection');
            if (dosersChecked) {
                dosersSection.style.display = 'block';
            } else {
                dosersSection.style.display = 'none';
            }
        }
        
        function getAdvancedParams() {
            return {
                targetTemp: parseFloat(document.getElementById('targetTemp').value),
                moisture: parseFloat(document.getElementById('moisture').value),
                soilDensity: parseFloat(document.getElementById('soilDensity').value)
            };
        }
        
        function calculateOperatingCosts() {
            const production = parseFloat(document.getElementById('production').value);
            const annualVolume = parseFloat(document.getElementById('annualVolumeSlider').value);
            const laborCost = parseFloat(document.getElementById('laborCostSlider').value);
            
            const options = getOptions();
            const params = getAdvancedParams();
            const generator = getGeneratorForProduction(production);
            const system = calculateSystem(production, generator, options, params);
            
            // Calcola ore effettive di utilizzo
            const annualHours = annualVolume / production;
            
            // Costi energetici proporzionali
            const energyCost = (system.annualCost / 2000) * annualHours;
            
            // Costi manodopera
            const laborCostTotal = annualHours * laborCost;
            
            // Totale costi operativi
            const totalAnnualCost = energyCost + laborCostTotal;
            
            // Costo specifico per m¬≥
            const specificCost = totalAnnualCost / annualVolume;
            
            // Aggiorna visualizzazione
            document.getElementById('annualHoursValue').textContent = Math.round(annualHours).toLocaleString('it-IT');
            document.getElementById('energyCostValue').textContent = Math.round(energyCost).toLocaleString('it-IT');
            document.getElementById('laborCostTotalValue').textContent = Math.round(laborCostTotal).toLocaleString('it-IT');
            document.getElementById('totalAnnualCostValue').textContent = Math.round(totalAnnualCost).toLocaleString('it-IT');
            document.getElementById('specificCostValue').textContent = specificCost.toFixed(2);
        }

        function updateCalculations() {
            const production = parseFloat(document.getElementById('production').value);
            const generator = parseFloat(document.getElementById('generator').value);
            const options = getOptions();
            const params = getAdvancedParams();
            
            const system = calculateSystem(production, generator, options, params);
            
            displayResults(system, production, generator);
            displayInvestment(system, options);
            calculateOperatingCosts();
        }

        function displayResults(sys, production, generator) {
            document.getElementById('resultsSection').innerHTML = `
                <div class="results-header"><h2>Configurazione Impianto</h2></div>
                <div class="cycle-info">
                    <p><strong>Ciclo:</strong> ${CONSTANTS.CYCLE_TIME} min | <strong>Batch/h:</strong> ${CONSTANTS.BATCHES_PER_HOUR} | <strong>Vasca:</strong> ${sys.batchSize.toFixed(2)} m¬≥</p>
                </div>
                <div class="results-grid">
                    <div class="result-card"><div class="label">Volume Vasca</div><div class="value">${sys.batchSize.toFixed(1)}<span class="unit">m¬≥</span></div></div>
                    <div class="result-card"><div class="label">Tempo Riscaldamento</div><div class="value">${sys.heatingTime.toFixed(1)}<span class="unit">min</span></div></div>
                    <div class="result-card"><div class="label">Vapore/Batch</div><div class="value">${sys.steamPerBatch.toFixed(0)}<span class="unit">kg</span></div></div>
                    <div class="result-card"><div class="label">Portata Picco</div><div class="value">${sys.peakFlow.toFixed(0)}<span class="unit">kg/h</span></div></div>
                    <div class="result-card"><div class="label">Portata Media</div><div class="value">${sys.avgFlow.toFixed(0)}<span class="unit">kg/h</span></div></div>
                    <div class="result-card"><div class="label">Capacit√† Richiesta</div><div class="value">${sys.requiredCapacity.toFixed(0)}<span class="unit">kg/h</span></div></div>
                    <div class="result-card"><div class="label">Gasolio</div><div class="value">${sys.dieselLiters.toFixed(1)}<span class="unit">l/h</span></div></div>
                </div>
            `;
        }

        function displayInvestment(sys, options) {
            const investmentHtml = `
                <div class="investment-card">
                    <div class="category">Generatore Vapore</div>
                    <div class="amount">${Math.round(sys.generatorCost).toLocaleString('it-IT')} ‚Ç¨</div>
                </div>
                <div class="investment-card">
                    <div class="category">Linea Processo Completa</div>
                    <div class="amount">${Math.round(sys.lineaCost).toLocaleString('it-IT')} ‚Ç¨</div>
                </div>
                <div class="investment-card">
                    <div class="category">Sistema Trasporto</div>
                    <div class="amount">${Math.round(sys.cocleeCost).toLocaleString('it-IT')} ‚Ç¨</div>
                </div>
                <div class="investment-card">
                    <div class="category">Trattamento Acqua</div>
                    <div class="amount">${Math.round(sys.waterTreatmentCost).toLocaleString('it-IT')} ‚Ç¨</div>
                </div>
                <div class="investment-card">
                    <div class="category">Quadri Elettrici</div>
                    <div class="amount">${Math.round(sys.electricalCost).toLocaleString('it-IT')} ‚Ç¨</div>
                </div>
                ${options.installazione ? `
                <div class="investment-card">
                    <div class="category">Installazione</div>
                    <div class="amount">${Math.round(sys.installationCost).toLocaleString('it-IT')} ‚Ç¨</div>
                </div>
                ` : ''}
            `;
            
            document.getElementById('investmentGrid').innerHTML = investmentHtml;
            document.getElementById('totalInvestmentValue').textContent = Math.round(sys.totalInvestment).toLocaleString('it-IT') + ' ‚Ç¨';
        }

        function sendRequest() {
            const name = document.getElementById('name').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            
            if (!name || !phone || !email) {
                alert('Per favore compila tutti i campi obbligatori');
                return false;
            }
            
            const production = parseFloat(document.getElementById('production').value);
            const generator = parseFloat(document.getElementById('generator').value);
            const options = getOptions();
            const params = getAdvancedParams();
            const substances = getDoserSubstances();
            const sys = calculateSystem(production, generator, options, params);
            
            const annualVolume = parseFloat(document.getElementById('annualVolumeSlider').value);
            const laborCost = parseFloat(document.getElementById('laborCostSlider').value);
            const annualHours = annualVolume / production;
            const energyCost = (sys.annualCost / 2000) * annualHours;
            const laborCostTotal = annualHours * laborCost;
            const totalAnnualCost = energyCost + laborCostTotal;
            const specificCost = totalAnnualCost / annualVolume;
            
            // Parametri template EmailJS
            const templateParams = {
                to_email: 'info@inguanavapore.it',
                from_name: name,
                from_phone: phone,
                from_email: email,
                production: production,
                generator: generator,
                batch_size: sys.batchSize.toFixed(2),
                cycle_time: CONSTANTS.CYCLE_TIME,
                batches_per_hour: CONSTANTS.BATCHES_PER_HOUR,
                temp: params.targetTemp,
                moisture: params.moisture,
                density: params.soilDensity,
                opt_sminuzzatore: options.sminuzzatore ? '‚úì Incluso' : '‚úó Non incluso',
                opt_vaglio: options.vaglio ? '‚úì Incluso' : '‚úó Non incluso',
                opt_dosatori: options.dosatori ? '‚úì Incluso' : '‚úó Non incluso',
                opt_installazione: options.installazione ? '‚úì Incluso' : '‚úó Non incluso',
                substances: substances.length > 0 ? substances.join(', ') : 'Nessuna sostanza selezionata',
                investment_generator: Math.round(sys.generatorCost).toLocaleString('it-IT'),
                investment_line: Math.round(sys.lineaCost).toLocaleString('it-IT'),
                investment_other: Math.round(sys.cocleeCost + sys.waterTreatmentCost + sys.electricalCost + sys.installationCost).toLocaleString('it-IT'),
                investment_total: Math.round(sys.totalInvestment).toLocaleString('it-IT'),
                annual_cost: Math.round(totalAnnualCost).toLocaleString('it-IT'),
                annual_volume: annualVolume.toLocaleString('it-IT'),
                specific_cost: specificCost.toFixed(2),
                annual_hours: Math.round(annualHours).toLocaleString('it-IT'),
                labor_cost_hourly: laborCost.toFixed(2),
                page_url: window.location.href,
                request_date: new Date().toLocaleDateString('it-IT'),
                request_time: new Date().toLocaleTimeString('it-IT')
            };
            
            const submitBtn = document.getElementById('submitBtn');
            const originalText = submitBtn.textContent;
            
            // Disabilita bottone durante invio
            submitBtn.disabled = true;
            submitBtn.textContent = '‚è≥ Invio in corso...';
            
            // Invia email tramite EmailJS
            emailjs.send(
                EMAILJS_CONFIG.serviceId,
                EMAILJS_CONFIG.templateId,
                templateParams
            ).then(function(response) {
                console.log('Email inviata con successo!', response.status, response.text);
                
                // Riabilita bottone
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
                
                // Mostra popup di successo
                showModal();
                
            }, function(error) {
                // Errore
                console.error('Errore invio email:', error);
                
                // Riabilita bottone
                submitBtn.disabled = false;
                submitBtn.textContent = originalText;
                
                // Feedback errore con fallback mailto
                if (confirm('‚ö†Ô∏è Si √® verificato un errore nell\'invio automatico.\n\nVuoi aprire il tuo client email come alternativa?')) {
                    // Fallback a mailto
                    const emailBody = `
RICHIESTA DIMENSIONAMENTO IMPIANTO VAPORE
==========================================

DATI CONTATTO:
Nome: ${name}
Telefono: ${phone}
Email: ${email}

CONFIGURAZIONE IMPIANTO:
- Produzione: ${production} m¬≥/h
- Generatore: ${generator} kg/h
- Volume vasca: ${sys.batchSize.toFixed(2)} m¬≥

PARAMETRI PROCESSO:
- Temperatura sterilizzazione: ${params.targetTemp}¬∞C
- Umidit√† terriccio: ${params.moisture}%
- Densit√† terriccio: ${params.soilDensity} kg/m¬≥

COMPONENTI OPZIONALI:
${options.sminuzzatore ? '‚úì' : '‚úó'} Sminuzzatore
${options.vaglio ? '‚úì' : '‚úó'} Vaglio
${options.dosatori ? '‚úì' : '‚úó'} Dosatori Reintegro
${options.installazione ? '‚úì' : '‚úó'} Installazione

${substances.length > 0 ? `SOSTANZE DA DOSARE:\n${substances.map(s => '- ' + s).join('\n')}` : ''}

COSTI OPERATIVI:
- Volume annuale: ${annualVolume.toLocaleString('it-IT')} m¬≥
- Ore utilizzo: ${Math.round(annualHours).toLocaleString('it-IT')} h/anno
- Costo lavoro: ${laborCost.toFixed(2)} ‚Ç¨/h
- Costi energetici: ${Math.round(energyCost).toLocaleString('it-IT')} ‚Ç¨/anno
- Costi manodopera: ${Math.round(laborCostTotal).toLocaleString('it-IT')} ‚Ç¨/anno
- COSTO SPECIFICO: ${specificCost.toFixed(2)} ‚Ç¨/m¬≥

INVESTIMENTO TOTALE: ${Math.round(sys.totalInvestment).toLocaleString('it-IT')} ‚Ç¨

---
Data: ${new Date().toLocaleDateString('it-IT')}
                    `.trim();
                    
                    const mailto = `mailto:info@inguanavapore.it?subject=Richiesta Dimensionamento Impianto ${production}m3/h&body=${encodeURIComponent(emailBody)}`;
                    window.location.href = mailto;
                }
            });
            
            return false;
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Inizializza valori display parametri avanzati
            document.getElementById('targetTempValue').textContent = document.getElementById('targetTemp').value;
            document.getElementById('moistureValue').textContent = document.getElementById('moisture').value;
            document.getElementById('soilDensityValue').textContent = document.getElementById('soilDensity').value;
            
            // Inizializza slider costi operativi
            updateVolumeSliderRange(currentProduction);
            
            // Event listeners per costi operativi
            document.getElementById('annualVolumeSlider').addEventListener('input', function() {
                document.getElementById('annualVolumeValue').textContent = parseInt(this.value).toLocaleString('it-IT');
                calculateOperatingCosts();
            });
            
            document.getElementById('laborCostSlider').addEventListener('input', function() {
                document.getElementById('laborCostValue').textContent = parseFloat(this.value).toFixed(2);
                calculateOperatingCosts();
            });
            
            // Event listeners per opzioni
            document.getElementById('optSminuzzatore').addEventListener('change', updateCalculations);
            document.getElementById('optVaglio').addEventListener('change', updateCalculations);
            document.getElementById('optDosatori').addEventListener('change', function() {
                toggleDoserSection();
                updateCalculations();
            });
            document.getElementById('optInstallazione').addEventListener('change', updateCalculations);
            
            // Parametri avanzati - solo per documentazione
            document.getElementById('targetTemp').addEventListener('input', function() {
                document.getElementById('targetTempValue').textContent = this.value;
            });
            document.getElementById('moisture').addEventListener('input', function() {
                document.getElementById('moistureValue').textContent = this.value;
            });
            document.getElementById('soilDensity').addEventListener('input', function() {
                document.getElementById('soilDensityValue').textContent = this.value;
            });
            
            // Event listeners per sostanze dosatori
            document.getElementById('subMicrorganismi').addEventListener('change', function() {});
            document.getElementById('subConcime').addEventListener('change', function() {});
            document.getElementById('subInorganici').addEventListener('change', function() {});
            document.getElementById('subSubstrato').addEventListener('change', function() {});
            document.getElementById('subAcqua').addEventListener('change', function() {});
            
            toggleDoserSection();
            updateCalculations();
        });
    </script>
    
    <!--
    ========================================================================
    ISTRUZIONI SETUP EMAILJS - LEGGI ATTENTAMENTE
    ========================================================================
    
    Per attivare l'invio automatico delle email SENZA aprire il client di posta,
    segui questi passaggi (richiede 5-10 minuti):
    
    PASSO 1: REGISTRAZIONE EMAILJS
    -------------------------------
    1. Vai su https://www.emailjs.com
    2. Clicca "Sign Up" (Registrazione gratuita)
    3. Completa registrazione con email
    4. Verifica la tua email
    
    PASSO 2: AGGIUNGI SERVIZIO EMAIL
    ---------------------------------
    1. Nel dashboard EmailJS clicca "Add New Service"
    2. Scegli il tuo provider email (Gmail consigliato):
       - Gmail: Facile e veloce
       - Outlook: Alternativa valida
       - Altri: SMTP personalizzato
    3. Segui le istruzioni per connettere il tuo account
    4. SALVA il "Service ID" (es: service_abc1234)
    
    PASSO 3: CREA TEMPLATE EMAIL
    -----------------------------
    1. Nel dashboard clicca "Email Templates" ‚Üí "Create New Template"
    2. IMPORTANTE: Copia e incolla questo template:
    
    ---INIZIO TEMPLATE---
    Oggetto: Richiesta Dimensionamento Impianto {{production}}m¬≥/h
    
    RICHIESTA DIMENSIONAMENTO IMPIANTO VAPORE
    ==========================================
    
    DATI CONTATTO:
    Nome: {{from_name}}
    Telefono: {{from_phone}}
    Email: {{from_email}}
    
    CONFIGURAZIONE IMPIANTO:
    - Produzione: {{production}} m¬≥/h
    - Generatore: {{generator}} kg/h
    - Volume vasca: {{batch_size}} m¬≥
    - Ciclo: {{cycle_time}} minuti
    - Batch per ora: {{batches_per_hour}}
    
    PARAMETRI PROCESSO:
    - Temperatura sterilizzazione: {{temp}}¬∞C
    - Umidit√† terriccio: {{moisture}}%
    - Densit√† terriccio: {{density}} kg/m¬≥
    
    COMPONENTI OPZIONALI:
    - Sminuzzatore: {{opt_sminuzzatore}}
    - Vaglio: {{opt_vaglio}}
    - Dosatori Reintegro: {{opt_dosatori}}
    - Installazione: {{opt_installazione}}
    
    SOSTANZE DA DOSARE:
    {{substances}}
    
    COSTI OPERATIVI:
    - Volume annuale: {{annual_volume}} m¬≥
    - Ore utilizzo: {{annual_hours}} h/anno
    - Costo lavoro: {{labor_cost_hourly}} ‚Ç¨/h
    - COSTO SPECIFICO: {{specific_cost}} ‚Ç¨/m¬≥
    
    INVESTIMENTO TOTALE: {{investment_total}} ‚Ç¨
    - Generatore: {{investment_generator}} ‚Ç¨
    - Linea completa: {{investment_line}} ‚Ç¨
    - Altri componenti: {{investment_other}} ‚Ç¨
    
    COSTI OPERATIVI ANNUALI: {{annual_cost}} ‚Ç¨
    
    ---
    Richiesta da: {{page_url}}
    Data: {{request_date}} ore {{request_time}}
    ---FINE TEMPLATE---
    
    3. Imposta "To email" = {{to_email}}
    4. Salva il template
    5. SALVA il "Template ID" (es: template_xyz5678)
    
    PASSO 4: OTTIENI PUBLIC KEY
    ----------------------------
    1. Nel dashboard vai su "Account" ‚Üí "General"
    2. Trova "Public Key" (o "User ID")
    3. COPIA la chiave (es: aBcDeFgHiJkLmNoPqR)
    
    PASSO 5: AGGIORNA IL CODICE
    ----------------------------
    Cerca nel file HTML la sezione:
    
    const EMAILJS_CONFIG = {
        publicKey: 'YOUR_PUBLIC_KEY',      // ‚Üê Sostituisci qui
        serviceId: 'YOUR_SERVICE_ID',      // ‚Üê Sostituisci qui
        templateId: 'YOUR_TEMPLATE_ID'     // ‚Üê Sostituisci qui
    };
    
    Sostituisci con i tuoi valori salvati nei passi precedenti
    
    PASSO 6: TESTA IL FUNZIONAMENTO
    --------------------------------
    1. Salva il file HTML
    2. Apri nel browser
    3. Compila il form e clicca "Invia Report"
    4. Dovresti vedere "‚úÖ Richiesta inviata con successo!"
    5. Controlla la casella email info@inguanavapore.it
    
    ========================================================================
    -->
</body>
</html>
